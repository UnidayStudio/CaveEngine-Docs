<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Scene - Cave Engine Docs</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Cave Engine Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">About</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Docs/eula/" class="dropdown-item">License (EULA)</a>
</li>
                                    
<li>
    <a href="../../../Docs/roadmap/" class="dropdown-item">Roadmap</a>
</li>
                                    
<li>
    <a href="../../../Docs/faq/" class="dropdown-item">FAQ</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Release Notes</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Docs/ReleaseNotes/v120/" class="dropdown-item">Cave 1.2.0</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Older Versions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../Docs/ReleaseNotes/v099/" class="dropdown-item">Cave 0.9.9</a>
</li>
            
<li>
    <a href="../../../Docs/ReleaseNotes/v098/" class="dropdown-item">Cave 0.9.8</a>
</li>
            
<li>
    <a href="../../../Docs/ReleaseNotes/v0972/" class="dropdown-item">Cave 0.9.7.2</a>
</li>
            
<li>
    <a href="../../../Docs/ReleaseNotes/v097/" class="dropdown-item">Cave 0.9.7</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Python API</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../cave1/" class="dropdown-item">Cave Engine 1.x</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cave Engine 0.9</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../introduction/" class="dropdown-item">Introduction</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Core</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Scene</a>
</li>
            
<li>
    <a href="../entity/" class="dropdown-item">Entity</a>
</li>
            
<li>
    <a href="../component/" class="dropdown-item">Component</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Components</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Components/transform/" class="dropdown-item">Transform Component</a>
</li>
            
<li>
    <a href="../../Components/gameplay/" class="dropdown-item">Gameplay Components</a>
</li>
            
<li>
    <a href="../../Components/graphics/" class="dropdown-item">Graphics Components</a>
</li>
            
<li>
    <a href="../../Components/physics/" class="dropdown-item">Physics Components</a>
</li>
            
<li>
    <a href="../../Components/interface/" class="dropdown-item">Game UI</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../math/" class="dropdown-item">Math</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Engine</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../engineUtils/" class="dropdown-item">Utilities</a>
</li>
            
<li>
    <a href="../../engineMisc/" class="dropdown-item">Miscellaneous</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Assets</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Assets/materials/" class="dropdown-item">Material Manipulation</a>
</li>
            
<li>
    <a href="../../Assets/meshes/" class="dropdown-item">Mesh Manipulation</a>
</li>
            
<li>
    <a href="../../Assets/audio/" class="dropdown-item">Audio Playing</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Events</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Events/events/" class="dropdown-item">Handling Events</a>
</li>
            
<li>
    <a href="../../Events/keycodes/" class="dropdown-item">Keycodes</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Editor Only API</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../EditorAPI/tooling/" class="dropdown-item">Writting your own Tools</a>
</li>
            
<li>
    <a href="../../EditorAPI/uiModule/" class="dropdown-item">UI Submodule API</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Showcase</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Showcase/games/" class="dropdown-item">Games Made with Cave</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="https://unidaystudio.itch.io/cave-engine" class="nav-link">Get Cave</a>
                            </li>
                            <li class="nav-item">
                                <a href="https://bit.ly/patreon-uniday" class="nav-link">Patreon</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../introduction/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../entity/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#scene" class="nav-link">Scene</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#cavescene" class="nav-link">cave.Scene</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#-scene-collision-checks" class="nav-link">- Scene Collision Checks</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#-scene-queries" class="nav-link">- Scene Queries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#scene-related-classes" class="nav-link">Scene Related Classes</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#caveraycastout" class="nav-link">cave.RayCastOut</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cavespherecastout" class="nav-link">cave.SphereCastOut</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cavecollisioninfo" class="nav-link">cave.CollisionInfo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cavecamera" class="nav-link">cave.Camera</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cavesun" class="nav-link">cave.Sun</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#scenes-graphic-settings" class="nav-link">Scene's Graphic Settings</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#cavegraphconfig" class="nav-link">cave.GraphConfig</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="scene">Scene</h1>
<p>The <code>cave.Scene</code> is where all your game will happen. You can think of it as a Level where you can put all your entities in order to build your worlds, enemies and the game itself. </p>
<p>There will always be a scene loaded (and you can get the current one by calling <code>cave.getCurrentScene()</code>), one at the time and you can change or reload it any time you want during the gameplay. Check the <code>Engine &gt; Utilities &gt; Scene</code> section for more details on it.</p>
<p>In order to completely understand and use all the APIs provided to manipulate the Scenes, you'll also see some other important classes (in this page) that will make a lot of sense to you after reading the <code>cave.Scene</code> documentation below. So let's get started:</p>
<h2 id="cavescene">cave.Scene</h2>
<h5 id="variables">Variables</h5>
<p>Cave's Scene only have those three variables. But they all serve a specific purpose, as you can see below.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">name</td>
<td>The scene name.</td>
</tr>
<tr>
<td style="text-align: left;">paused</td>
<td>You can set this to <code>True</code> or <code>False</code> to pause/unpause the scene. If True, it will no longer call the component's <code>update</code> method and will call the <code>pausedUpdate</code> instead.</td>
</tr>
<tr>
<td style="text-align: left;">properties</td>
<td>This is a python dictionary that you can use to store everything related to your game's scene. Very useful for variables that needs to be accessed by various entities, such as enemy waves, time spent, remaining items to collect or scores.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">name        : str
paused      : bool
properties  : dict
</code></pre>
<h5 id="methods">Methods</h5>
<p>In order to create new Entities, you have two options: Build them from scratch in the code or instantiate them by providing a template. To create them from scratch, you can use one of those two scene methods:</p>
<pre><code class="language-python"># Creates a brand new entity and returns it to you:
newEntity() -&gt; cave.Entity

# If you already have an Entity and just need to add it to the scene, then use this 
# (it will return the entity as well to make it easy for you to use the method):
add(entity: Entity) -&gt; cave.Entity
</code></pre>
<p>The <code>scene.add(entity)</code> method is used to add an entity you manually build by yourself in the code. Most of the times it's not exactly what you want. That's why there is a <code>scene.addFromTemplate(name)</code> alternative: Given an Entity Template name, the engine will construct a new entity for you followying that template. Both methods returns the added entity for convenience.</p>
<p>If you want to create a new one by providing a template (<strong>recommended</strong>), use this method:</p>
<pre><code class="language-python"># Note that you can provide optional arguments to set a custom transform to add it to.
addFromTemplate(
    templateName : str, 
    position = cave.Vector3(0, 0, 0), 
    rotation = cave.Vector3(0, 0, 0), 
    scale    = cave.Vector3(1, 1, 1)
) -&gt; cave.Entity
</code></pre>
<p>If you need to remove an Entity from the scene, you can either kill it (calling <code>entity.kill()</code>) or just remove them directly using this method:</p>
<pre><code class="language-python">remove(entity : cave.Entity)
</code></pre>
<hr />
<p>This method will return the elapsed time, in second, since the Scene creation. This value does <strong>not</strong> include the time paused (and yes, it's the number user by the <code>SceneTimer</code> to count time).</p>
<pre><code class="language-python">getElapsedSceneTime() -&gt; float
</code></pre>
<p>You may also want to adjust every scene setting that you see in the Scene's editor, such as the <code>atmosphere, mist, sky, etc</code>. For that, you need to get the Scene's <strong>GraphConfig</strong> class instance. You can check their API reference later in this page. Here is how you can get it:</p>
<pre><code class="language-python">getGraphConfig() -&gt; GraphConfig
</code></pre>
<p>In Cave Engine, every Scene have its own Sun light and you can get it by calling this scene method:</p>
<pre><code class="language-python">getSun() -&gt; cave.Sun
</code></pre>
<p>You can also get the Scene's active Camera. It's importat to know that the scene stores its own camera instance (type cave.Camera) and it has nothing to do with the CameraComponent or the entity that have it. Check the camera operations later in this page.</p>
<pre><code class="language-python">getCamera() -&gt; cave.Camera
</code></pre>
<hr />
<h2 id="-scene-collision-checks">- Scene Collision Checks</h2>
<p>If you need to do some "in place" Collision dettection like a ray cast or check if there are objects at certain place, you can use one of those methods below. Keep in mind that all of them will rely on the physics engine to return the correct values, so make sure that the Entities that you're trying to detect have a proper Physics shape (like a Rigid Body or a Character Component). </p>
<p>It's also good to know that the result is calculated immediately when you call those functions, so you don't need to worry about the output being delayed by a frame like some engines. It will be up to date with the current scene status. </p>
<p>The first and most common method in this list is the <code>rayCast</code> and <code>rayCastAll</code>. The difference between them is that the first one will stop and return in the first ray hit and the second one will return a python list with all the hits. It's a good option if you want to make a gun that can shoot through walls, for example.</p>
<pre><code class="language-python">rayCast(origin : cave.Vector3, target : cave.Vector3, mask=cave.BitMask()) -&gt; cave.RayCastOut
rayCastAll(origin : cave.Vector3, target : cave.Vector3, mask=cave.BitMask()) -&gt; list of cave.RayCastOut
</code></pre>
<p>Notice that it does have an optional <strong>mask</strong> parameters (<code>cave.BitMask</code>) that allows you to filter your results.</p>
<p>Sometimes you may want even more control than a simple RayCast. They may be a good fit to shoot bullets, for example, but let's think a little bit out of box: Let's think about <a href="https://en.wikipedia.org/wiki/Goku"><strong>Goku</strong></a> and his famous attack: <a href="https://dragonball.fandom.com/wiki/Kamehameha"><strong>The Kamehameha</strong></a>. </p>
<p>In this attack, Goku first creates an energy ball into his hands, then throws the energy against his target, in a form of a giant energy wave. If we wanted to recreate this effect in <strong>Cave</strong>, in order to apply the attack's damage, we could cast a Ray using the <code>RayCast</code> and check for the hits. But this solution have a problem: The Kamehameha is a thick evergy wave and the RayCast will consider it as if it was just a thin line. If Goku decided to attack a wall with it and the wall has a small hole, like a bullet hole, the kamehameha would go through if we user the RayCast and that's not what we want.</p>
<p>So what to do instead? It would be great if we could add a radius to the RayCast, that way we could make it as thick as we want, right? Exactly! And that's the purpose of the <strong>SphereCast</strong>. It's basically a RayCast, but with a radius. This alternative is very useful in many other use cases, not only the Kamehameha. As another example, <a href="https://en.wikipedia.org/wiki/Grand_Theft_Auto_IV"><strong>GTA IV</strong></a> is a game that seems to use this technique to handle its camera collision.</p>
<p><em>(If you want to be technical here and understand how it works behind the scenes: it does a convex sweep test with a sphere of a given radius from and to a position in the physics world).</em></p>
<p>The <strong>Sphere Cast</strong>, just like the <strong>Ray Cast</strong>, have two methods related to it: <code>sphereCast(...)</code> and <code>sphereCastAll(...)</code> and they behave in the exact same way as their ray cast equivalents, except that they return <code>cave.SphereCastOut</code> class instances instead of the <code>cave.RayCastOut</code>. You can find its documentation in this page for reference. Here is the <strong>Sphere Cast</strong> API reference:</p>
<pre><code class="language-python">sphereCast(origin : cave.Vector3, target : cave.Vector3, radius: float, mask=cave.BitMask()) -&gt; cave.SphereCastOut
sphereCastAll(origin : cave.Vector3, target : cave.Vector3, radius: float, mask=cave.BitMask()) -&gt; list of cave.SphereCastOut
</code></pre>
<p>Ray and Sphere casts are good, but sometimes they are not enough for what you want. That's why Cave Engine lets you check for collision within certain bounds. For now, you can use a Box or a Sphere shape for this and the usage is very simple as you can see below. Check the <code>cave.CollisionInfo</code> for additional details.</p>
<pre><code class="language-python"># Box Shape checks:
checkContactBox(boxTransform: cave.Transform, mask=cave.BitMask()) -&gt; list of cave.CollisionInfo
checkContactBox(
    boxPosition : cave.Vector3,
    boxRotation : cave.Vector3,
    boxScale    : cave.Vector3, 
    mask=cave.BitMask()
) -&gt; list of cave.CollisionInfo

# Sphere Shape checks:
checkContactSphere(position: cave.Vector3, radius: float, mask=cave.BitMask())-&gt; list of cave.CollisionInfo
</code></pre>
<hr />
<h2 id="-scene-queries">- Scene Queries</h2>
<p>If you want to get a specific Entity in the scene, you can use one of those two methods:</p>
<pre><code class="language-python">getEntity(id : int) -&gt; cave.Entity
getEntity(name : str) -&gt; cave.Entity
</code></pre>
<p><strong>Note:</strong> Time complexity of getting an Entity by name (string) is <code>O(n)</code> and by ID is <code>O(1)</code>. In other words: get by name is way slower than by ID so it's recommended to store the entity ID and use it as much as you can. Also, when you have multiple entities with the same name in the scene, it will always return the first entity found (and this result may be non deterministic - in other words the result may vary).</p>
<p>But that's not everything! If you need to get all the entities in the scene, you can do it so by calling:</p>
<pre><code class="language-python">getEntities() -&gt; list of cave.Entity
</code></pre>
<p>And you can be a bit smarter than that and filter the Entities by something, such as by <strong>Tag</strong> or <strong>Property</strong>. Keep in mind that if you decide to filter by <strong>Tag</strong>, it will tend to be faster than it is by <strong>Property</strong>, since the Cave's tag system does not rely on python (meaning that the backends are completely written in C++) and the Properties does.</p>
<pre><code class="language-python">getEntitiesWithTag(tag: str) -&gt; list of cave.Entity
getEntitiesWithProperty(property: str) -&gt; list of cave.Entity
</code></pre>
<p>At this point, you probably already noticed that Cave Engine organizes the scene into a <strong>Tree structure</strong>, where entities can be child of other entities. All the query methods mentioned above will consider this entire hierarchy, but sometimes you may only need what we call the <strong>Root Entities</strong>. Meaning the Entities with no parents. If that's your case, you can easily retrieve them with the methods above:</p>
<pre><code class="language-python"># This will return all the root entities in the scene:
getRootEntities() -&gt; list of cave.Entity

# The following ones will only query the root Entities:
getRootEntitiesWithTag(tag: str) -&gt; list of cave.Entity
getRootEntitiesWithProperty(property: str) -&gt; list of cave.Entity
</code></pre>
<p><strong>Good to know:</strong> If you put an entity inside a folder, it will no longer be a root entity (because it will be child of the folder entity). It's also good to know that querying Root entities can be faster than doing it with all entities, since the engine does not need to recursively iterate the root children. </p>
<hr />
<h1 id="scene-related-classes">Scene Related Classes</h1>
<p>As discussed in the beginning of this page, there are some other helpful classes that are important for you to understand in order to properly manipulate the scenes in Cave. Here you'll find their documentation.</p>
<h2 id="caveraycastout">cave.RayCastOut</h2>
<p>This class is used as a data storage to return ray cast hit information. Returned by the scene when you do a rayCast and it finds something.</p>
<h5 id="variables_1">Variables</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">hit</td>
<td>It's <code>True</code> if this is a valid RayCast Output. It's always good to check it first.  As an example, of the <code>scene.RayCast(...)</code> method don't find anything, it will return an invalid RayCastOut and this will be false.</td>
</tr>
<tr>
<td style="text-align: left;">position</td>
<td>The exact position in world space where the ray hitted an entity. Good to use for bullet holes, as an example.</td>
</tr>
<tr>
<td style="text-align: left;">normal</td>
<td>The normal that the surface hitted by the ray is pointing to. Also good for bullet holes, as an example.</td>
</tr>
<tr>
<td style="text-align: left;">entity</td>
<td>The entity hit by the ray.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">hit      : bool
position : cave.Vector3
normal   : cave.Vector3
entity   : cave.Entity
</code></pre>
<h2 id="cavespherecastout">cave.SphereCastOut</h2>
<p>This class inherits from <code>cave.RayCastOut</code> (meaning that it have all its parent class methods and variables) but add two extra variables: <code>penetration</code> and <code>recoveryPosition</code>. It serves as the output for the <strong>Scene's SphereCast methods</strong>.</p>
<h5 id="variables_2">Variables</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">penetration</td>
<td>Ranges from <code>[0.0 to 1.0]</code> and specifies how deep into the shape the collision is. If it's near zero, it means that the collision was close to the SphereCast's border and if it's near to one it means that it was close to the spherecast's center ray.</td>
</tr>
<tr>
<td style="text-align: left;">recoveryPosition</td>
<td>This represents the maximum position that the sphere could be at before hitting an obstacle.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">penetration      : float
recoveryPosition : cave.Vector3
</code></pre>
<h2 id="cavecollisioninfo">cave.CollisionInfo</h2>
<p>This class is used as a data storage to return collision hit information. This class is returned by the Scene when you call methods like <code>scene.checkContactBox(...)</code> or <code>scene.checkContactSphere(...)</code>, but it is also used anywhere else where collision information is necessary, for example when you check if a <code>Rigid Body</code> or <code>Character Component</code> collided with something.</p>
<p>There are two important things you need to know about Collisions and the <code>CollisionInfo</code>: </p>
<ul>
<li>
<p>The first thing is that when a shape collides with another, it may have <strong>one or more hits</strong>, depending on how deep the collision was and a lot of other factors such as the shape, how the collision happened and so on.</p>
</li>
<li>
<p>The second is that, because of this behavior, most of the times where you expect a <code>CollisionInfo</code> from Cave, it will always return a <code>list</code> of them (even if there is only one element in it), because it may have multiple ones, as explained above. Due to that, different from the <code>cave.RayCastOut</code>, you'll not find a <code>hit</code> variable to check if the collision was valid, because the engine will never return an invalid one. If there is no collision, the list will simply be empty.</p>
</li>
</ul>
<p>This is information will help you understand how to properly manipulate the Collisions in the engine. Most of the time that you need to handle them, you'll probably want to iterate over the output collisions until you find the one you want. Here is an example:</p>
<pre><code class="language-python">scene = cave.getCurrentScene()
playerPos = self.entity.getTransform().position

for hit in scene.checkContactSphere(playerPos, 3.0): 
    print(&quot;New Entity hit:&quot;, hit.entity.name)
</code></pre>
<p>In the code above, we use the scene's <code>checkContactSphere</code> method to see if there are any Entities within 3 meters from the player position (considering that it's the player that's executing this code, of course). Note that if you run this code, it may print the same entity twice, due to the reasons explained beefore. If you only want to take an entity hit into account once, you can cache them into a list, like this:</p>
<pre><code class="language-python">alreadyHit = []
for hit in scene.checkContactSphere(playerPos, 3.0): 
    if hit.entity in alreadyHit:
        # Skipping any entity that we already checked!
        continue 

    # Now we'll add the entity to the list to make sure we don't check it twice:
    alreadyHit.append(hit.entity)

    # Finally, we do what we want with the entity:
    print(&quot;New Entity hit:&quot;, hit.entity.name)
</code></pre>
<p>The explanation above will help you to handle collisions in most of the situations where the engine outputs to you a list of <code>cave.CollisionInfo</code> instances.</p>
<h5 id="variables_3">Variables</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">position</td>
<td>The exact position in world space where the collision happened.</td>
</tr>
<tr>
<td style="text-align: left;">normal</td>
<td>The direction that the collision point is pointing to.</td>
</tr>
<tr>
<td style="text-align: left;">entity</td>
<td>The entity hit.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">position : cave.Vector3
normal   : cave.Vector3
entity   : cave.Entity
</code></pre>
<hr />
<h2 id="cavecamera">cave.Camera</h2>
<p>The actual camera used by the Scene to do the rendering. You can get it by calling <code>scene.getCamera()</code>.
This class inherits from Cave's Transform, so you can also expect to be able to do all sorts of Transform manipulation with it, such as moving, rotating and/or scaling it.</p>
<h5 id="variables_4">Variables</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">aperture</td>
<td>Camera's aperture</td>
</tr>
<tr>
<td style="text-align: left;">nearPlane</td>
<td>The minimum distance from the camera that gets drawn to screen.</td>
</tr>
<tr>
<td style="text-align: left;">farPlane</td>
<td>The maximum distance from the camera that gets drawn to screen.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">aperture  : float
nearPlane : float
farPlane  : float
</code></pre>
<h5 id="methods_1">Methods</h5>
<p>The Camera have a lot of useful methods as well:</p>
<pre><code class="language-python">getViewProjection() -&gt; cave.Matrix4

# Returns a Vector representing a Ray that could be casted from the camera to the screen coordinates specified in the arguments.
getScreenRay(float x, float y) -&gt; cave.Vector3

# This one does the opposite of getScreenRay: Given a world position, returns its projected position in the camera's screen view.
getScreenPos(worldPos : cave.Vector3) -&gt; cave.Vector2
</code></pre>
<p>You can use the methods bellow to set the camera to Perspective or Ortographic mode:</p>
<pre><code class="language-python">setPerspective(fieldOfView : float)
setOrthographic(orthoArea : float)
</code></pre>
<p>And, of course, you can also get the field of view (or orthographic area) back by calling those method bellow. Keep that in mind that if you have a Orthographic camera dn tries to get the perspective field of view (or vice-versa), you may get wrong numbers or undefined behaviour.</p>
<pre><code class="language-python">getPerspectiveFov() -&gt; float
getOrthographicArea() -&gt; float
</code></pre>
<p>If you want to check if a camera is either perspective or orthographic, you can use those methods:</p>
<pre><code class="language-python">isPerspective() -&gt; bool
isOrthographic() -&gt; bool
</code></pre>
<hr />
<h2 id="cavesun">cave.Sun</h2>
<p>As already explained in this page, every Scene in Cave have its own Sun light. You can get it by calling <code>scene.getSun()</code> and it will return an instance of this class. You can use it to adjust the look of it, as you can see below.</p>
<h5 id="variables_5">Variables</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">hour</td>
<td>The hour of the day used to determine the sun position. Goes from 0 to 24 and the minutes needs to be represented by the fractional part of the value, so <code>12:30h</code> is <code>12.5</code>.</td>
</tr>
<tr>
<td style="text-align: left;">angle</td>
<td>The angle represents where in the horizon the sun will rise and set. It goes from <code>0ยบ</code> to <code>360ยบ</code>, in degrees.</td>
</tr>
<tr>
<td style="text-align: left;">color</td>
<td>The color of the sun.</td>
</tr>
<tr>
<td style="text-align: left;">mask</td>
<td>The shadow mask. It will only cast shadows to Mesh Components that its shadow mask intersect with this. If you're trying to make an entity don't cast shadows, this is what you're looking for.</td>
</tr>
<tr>
<td style="text-align: left;">intensity</td>
<td>The sun intensity. The more, the brighter it will be.</td>
</tr>
</tbody>
</table>
<p>Here is the Python API for Reference:</p>
<pre><code class="language-python">hour      : float
angle     : float
color     : cave.Vector3
mask      : cave.BitMask
intensity : float
</code></pre>
<hr />
<h1 id="scenes-graphic-settings">Scene's Graphic Settings</h1>
<p>As discussed already, most of the scene's graphic settings (such as mist, atmosphere and so on) can be adjusted by getting the <strong>cave.GraphConfig</strong> class from the Scene (by calling the scene's <code>getGraphConfig()</code> method). Since this class is configuration only, I'll simplify this API to make it easier for you to use. All the settings have the same purpose as they do in the Scene's Editor UI in the Editor. Here is the full API for reference.</p>
<h2 id="cavegraphconfig">cave.GraphConfig</h2>
<h5 id="variables_6">Variables</h5>
<pre><code class="language-python">applyShading      : bool

# Ambient Related...
ambient         : GraphConfigAmbient
ambient.use     : bool
ambient.factor  : float
ambient.color   : ColorSampler

# Mist Related...
mist          : GraphConfigMist
mist.use      : bool
mist.start    : float
mist.distance : float
mist.falloff  : float
mist.color    : ColorSampler

# Sky Related...
sky           : GraphConfigSky
sky.blur      : float
sky.intensity : float
sky.angle     : float
sky.color     : ColorSampler

# Ambient Occlusion Related...
ao            : AmbientOcclusion
ao.use        : bool
ao.texelScale : float
ao.distance   : float

# Atmosphere Related...
atmosphere              : GraphConfigAtmosphere
atmosphere.planetRadius : float
atmosphere.atmHeight    : float
atmosphere.sunIntensity : float

# Misc...
background       : cave.Vector3
ambientCol       : cave.Vector3
ambientIntensity : float
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
